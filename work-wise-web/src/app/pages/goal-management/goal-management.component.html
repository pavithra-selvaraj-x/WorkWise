<div class="goal-mamangement-wrapper">
  <ww-page-title-bar
    pageTitle="Goal Management"
    buttonText="Create Goal"
    iconName="add"
    (buttonPressed)="onCreateClicked()"
  ></ww-page-title-bar>
  <div class="content-container">
    <table
      mat-table
      [dataSource]="goalList"
      class="table-container"
      *ngIf="goalList.data.length > 0 && !isLoading"
      matSort
    >
      <ng-container matColumnDef="title">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>Title</th>
        <td mat-cell *matCellDef="let goal">{{ goal.title }}</td>
      </ng-container>

      <ng-container matColumnDef="description">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>Description</th>
        <td mat-cell *matCellDef="let goal">{{ goal.description }}</td>
      </ng-container>

      <ng-container matColumnDef="start_date">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>Start Date</th>
        <td mat-cell *matCellDef="let goal">{{ goal.start_date | date }}</td>
      </ng-container>

      <ng-container matColumnDef="end_date">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>End Date</th>
        <td mat-cell *matCellDef="let goal">{{ goal.end_date | date }}</td>
      </ng-container>

      <ng-container matColumnDef="status">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>Status</th>
        <td mat-cell *matCellDef="let goal">{{ goal.status }}</td>
      </ng-container>

      <ng-container matColumnDef="priority">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>Priority</th>
        <td mat-cell *matCellDef="let goal">{{ goal.priority }}</td>
      </ng-container>

      <ng-container matColumnDef="progress">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>Progress</th>
        <td mat-cell *matCellDef="let goal">{{ goal.progress }}%</td>
      </ng-container>

      <ng-container matColumnDef="task_count">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>
          Number of Tasks
        </th>
        <td mat-cell *matCellDef="let goal">{{ goal.task_list.length }}</td>
      </ng-container>

      <tr mat-header-row *matHeaderRowDef="displayedColumns; sticky: true"></tr>
      <tr
        mat-row
        *matRowDef="let row; columns: displayedColumns"
        (click)="onRowClick(row)"
      ></tr>
    </table>

    <div
      class="no-goals-container"
      *ngIf="goalList.data.length === 0 && !isLoading"
    >
      <img src="../../../assets/goal-list.svg" class="goal-list-image" />
      <div class="no-goal-text">
        No goals yet? <br />Let's change that! Click 'Create Goal' to add one.
      </div>
    </div>

    <ww-page-loader loadingText="Loading Goals..." *ngIf="isLoading" />
  </div>
</div>

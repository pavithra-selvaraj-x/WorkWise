<div class="create-task-wrapper">
  <div class="overlay"></div>
  <div class="create-task-container" [@slideInOut]>
    <ww-page-title-bar
      [pageTitle]="taskDetails ? 'Update Task' : 'Create Task'"
      [showClose]="true"
      (closePressed)="close()"
    ></ww-page-title-bar>
    <div class="instruction-message">
      {{
        taskDetails
          ? "Update the task details below and keep the task list current!"
          : "Fill in the details below to create a new task!"
      }}
    </div>
    <form class="task-form" [formGroup]="taskForm">
      <div class="form-group">
        <label>Title</label>
        <mat-form-field appearance="outline" class="form-field">
          <input matInput formControlName="title" placeholder="Enter Title" />
        </mat-form-field>
      </div>

      <div class="form-group">
        <label>Description</label>
        <mat-form-field appearance="outline" class="form-field">
          <textarea
            matInput
            formControlName="description"
            placeholder="Enter Description"
            rows="4"
          ></textarea>
        </mat-form-field>
      </div>

      <div class="form-group">
        <label>Start Date</label>
        <mat-form-field appearance="outline" class="form-field">
          <input
            matInput
            formControlName="start_date"
            placeholder="Select Start Date"
            [matDatepicker]="startDatePicker"
          />
          <mat-datepicker-toggle
            matSuffix
            [for]="startDatePicker"
          ></mat-datepicker-toggle>
          <mat-datepicker #startDatePicker></mat-datepicker>
        </mat-form-field>
      </div>

      <div class="form-group">
        <label>End Date</label>
        <mat-form-field appearance="outline" class="form-field">
          <input
            matInput
            formControlName="end_date"
            placeholder="Select End Date"
            [matDatepicker]="endDatePicker"
          />
          <mat-datepicker-toggle
            matSuffix
            [for]="endDatePicker"
          ></mat-datepicker-toggle>
          <mat-datepicker #endDatePicker></mat-datepicker>
        </mat-form-field>
      </div>

      <div class="form-group">
        <label>Status</label>
        <mat-radio-group class="radio-group" formControlName="status">
          <div class="radio-button-label">
            <mat-radio-button [value]="Status.Open"></mat-radio-button>
            <span>{{ Status.Open }}</span>
          </div>
          <div class="radio-button-label">
            <mat-radio-button [value]="Status.InProgress"></mat-radio-button>
            <span>{{ Status.InProgress }}</span>
          </div>
          <div class="radio-button-label">
            <mat-radio-button [value]="Status.Completed"></mat-radio-button>
            <span>{{ Status.Completed }}</span>
          </div>
          <div class="radio-button-label">
            <mat-radio-button [value]="Status.OnHold"></mat-radio-button>
            <span>{{ Status.OnHold }}</span>
          </div>
          <div class="radio-button-label">
            <mat-radio-button [value]="Status.Cancelled"></mat-radio-button>
            <span>{{ Status.Cancelled }}</span>
          </div>
        </mat-radio-group>
      </div>

      <div class="form-group">
        <label>Priority</label>
        <mat-radio-group class="radio-group" formControlName="priority">
          <div class="radio-button-label">
            <mat-radio-button [value]="Priority.Low"></mat-radio-button>
            <span>{{ Priority.Low }}</span>
          </div>
          <div class="radio-button-label">
            <mat-radio-button [value]="Priority.Medium"></mat-radio-button>
            <span>{{ Priority.Medium }}</span>
          </div>
          <div class="radio-button-label">
            <mat-radio-button [value]="Priority.High"></mat-radio-button>
            <span>{{ Priority.High }}</span>
          </div>
          <div class="radio-button-label">
            <mat-radio-button [value]="Priority.Urgent"></mat-radio-button>
            <span>{{ Priority.Urgent }}</span>
          </div>
        </mat-radio-group>
      </div>
    </form>
    <button
      mat-raised-button
      color="primary"
      type="submit"
      [disabled]="taskForm.invalid || isLoading"
      class="button-container"
      (click)="onSubmit()"
    >
      <mat-spinner
        *ngIf="isLoading"
        diameter="20"
        strokeWidth="3"
      ></mat-spinner>
      <span *ngIf="!isLoading">{{
        taskDetails ? "Update Task" : "Create Task"
      }}</span>
    </button>
  </div>
</div>
